<div data-ng-controller="customJobController">
    <div id="page-wrapper">
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">{{L.customCDIJob}}</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <i class="fa fa-bolt fa-fw"></i>Custom Job
                    </div>
                    <div class="panel-body"><h4 data-ng-bind-html="to_trusted(sampleTeaser)"></h4>
                        <div>
                            <hr/>
                            <div class="col-lg-12">
                                <div class="alert alert-info alert-dismissable">
                                    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                                    <span data-ng-bind-html="to_trusted1(zipNotice)"></span>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <alert data-ng-repeat="alert in alerts" type="alert.type" close="closeAlert($index)">{{alert.msg}}</alert>
                            </div>
                            <span us-spinner spinner-key="spinner-custom"></span>
                            <div class="col-lg-12">
                                <div>
                                    <b>{{L.selectUploadFile}}</b><br>
                                    <div class="fileUpload btn btn-primary">
                                        <span>{{L.chooseUploadFile}}</span>
                                        <input id="uploadBtn" type="file" class="upload" data-ng-file-select="onFileSelect($files)"/>
                                    </div>
                                    <span>{{selectedFile.name || L.noUploadFileChosen}}</span>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div data-ng-show="enableProgess"><progressbar class="progress-striped" value="progress" type="info">{{progress}}%</progressbar></div>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <form name="customJobForm" class="form-horizontal" role="form">
                                <div class="form-group" data-ng-class="{'has-error': customJobForm.jobName.$dirty && customJobForm.jobName.$invalid}">
                                    <label for="jobName" class="col-sm-2 control-label">{{L.jobNameLabel}}</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="jobName" name="jobName" data-ng-model="jobConfig.name" placeholder="{{L.jobNamePlaceholder}}" required data-ng-minlength="5" data-ng-maxlength="100">
                                        <span class="error" style="color: #a94442; font-size: 12px" data-ng-show="customJobForm.jobName.$dirty && customJobForm.jobName.$error.required">{{L.errorJobNameRequired}}</span>
                                        <span class="error" style="color: #a94442; font-size: 12px" data-ng-show="customJobForm.jobName.$dirty && customJobForm.jobName.$error.minlength">{{interpolate(L.errorJobNameMinimumSize, 5)}}</span>
                                        <span class="error" style="color: #a94442; font-size: 12px" data-ng-show="customJobForm.jobName.$dirty && customJobForm.jobName.$error.maxlength">{{interpolate(L.errorJobNameMaximumSize, 100)}}</span>
                                    </div>
                                </div>
                                <div class="form-group" data-ng-class="{'has-error': customJobForm.jobDesc.$dirty && customJobForm.jobDesc.$invalid}">
                                    <label for="jobDesc" class="col-sm-2 control-label">{{L.jobDescriptionLabel}}</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="jobDesc" name="jobDesc" data-ng-model="jobConfig.description" placeholder="{{L.jobDescriptionPlaceholder}}" g-maxlength="255">
                                        <span class="error" style="color: #a94442; font-size: 12px" data-ng-show="customJobForm.entryPoint.$dirty && customJobForm.jobDesc.$error.maxlength">{{interpolate(L.errorJobDescriptionMaximumSize, 255)}}</span>
                                    </div>
                                </div>
                                <div class="form-group" data-ng-class="{'has-error': customJobForm.jobType.$dirty && customJobForm.jobType.$invalid}">
                                    <label for="jobType" class="col-sm-2 control-label">{{L.jobTypeLabel}}</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="jobType" name="jobType" data-ng-model="jobType" data-ng-options="jobType.name for jobType in jobTypes" name="jobType" required data-ng-change="jobConfig.modules[0].type = jobType.type">
                                            <option value="">{{L.selectJobType}}</option>
                                        </select><em> {{jobType.description}}</em>
                                    </div>
                                </div>
                                <div class="form-group" data-ng-class="{'has-error': customJobForm.entryPoint.$dirty && customJobForm.entryPoint.$invalid}">
                                    <label for="jobDesc" class="col-sm-2 control-label">{{L.entryPointLabel}}</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="entryPoint" name="entryPoint" data-ng-model="jobConfig.modules[0].attributes[0].value" required data-ng-minlength="5" data-ng-pattern="/^.*\.(ktr|KTR|kjb|KJB)$/" placeholder="{{L.entryPointPlaceholder}}">
                                        <span class="error" style="color: #a94442; font-size: 12px" data-ng-show="customJobForm.entryPoint.$dirty && customJobForm.entryPoint.$error.required">{{L.errorEntryPointRequired}}</span>
                                        <span class="error" style="color: #a94442; font-size: 12px" data-ng-show="customJobForm.entryPoint.$dirty && customJobForm.entryPoint.$error.minlength">{{interpolate(L.errorEntryPointMinimumSize, 5)}}</span>
                                        <span class="error" style="color: #a94442; font-size: 12px" data-ng-show="customJobForm.entryPoint.$dirty && customJobForm.entryPoint.$error.pattern">{{L.errorEntryPointPattern}}</span>
                                    </div>
                                </div>
                                <h4>{{L.notificationsSection}}</h4>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">{{L.successRecipientLabel}}</label>
                                    <div class="col-sm-6">
                                        <div class="input-group">
                              <span class="input-group-addon">
                                <input data-ng-model="succesNotifications" type="checkbox">
                              </span>
                                            <input popover-placement="top" popover="{{L.notificationRecipientPopover}}" popover-trigger="focus" type="text" class="form-control" data-ng-model="jobConfig.modules[0].attributes[2].value" data-ng-readonly="!succesNotifications" placeholder="{{L.notificationRecipientPlaceholder}}">
                                        </div><!-- /input-group -->
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">{{L.failRecipientLabel}}</label>
                                    <div class="col-sm-6">
                                        <div class="input-group">
                              <span class="input-group-addon">
                                <input data-ng-model="failureNotifications" type="checkbox">
                              </span>
                                            <input popover-placement="top" popover="{{L.notificationRecipientPopover}}" popover-trigger="focus" type="text" class="form-control" data-ng-model="jobConfig.modules[0].attributes[1].value" data-ng-readonly="!failureNotifications" placeholder="{{L.notificationRecipientPlaceholder}}">
                                        </div><!-- /input-group -->
                                    </div>
                                </div>
                                <h4><a href="" data-ng-click="collapseScheduleDiv = !collapseScheduleDiv; setScheduleActive()"><strong>{{L.addSchedule}}</strong></a></h4>
                                <div class="col-lg-12" collapse="collapseScheduleDiv">
                                    <input data-ng-hide="true" data-ng-model="isScheduleValid" type="checkbox" data-ng-required="showSchedule.isActive">
                                    <div  class="col-lg-8" data-ng-include="scheduleTemplate.path"></div>
                                </div>
                                <button data-ng-hide="hideClose" class="btn btn-default pull-right"  data-ng-click="cancel()">{{L.closeButton}}</button>
                                <button data-ng-show="hideClose" class="btn btn-info pull-right" type="submit" data-ng-disabled="!customJobForm.$valid || !selectedFile" data-ng-click="createJob()">{{L.createButton}}</button>
                            </form>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <h5 data-ng-bind-html="to_trusted2(advancedFrameworkTeaser)"></h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>